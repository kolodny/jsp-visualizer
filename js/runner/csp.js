var csp=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(5),i=n(7),a=n(3);r.operations=i,r.recorder=a,t.exports=r},function(t,e,n){"use strict";function r(t,e){return{value:t,time:Date.now(),procId:e,blockedTime:0}}var i=n(4),a=n(2),o=n(3),s=64,u=1024,c=null,f=function(t){this.value=t},p=function(t,e){this.handler=t,this.value=e},h=function(t,e,n){this.buf=n,this.takes=t,this.puts=e,this.dirty_takes=0,this.dirty_puts=0,this.closed=!1};h.prototype._put=function(t,e){if(t===c)throw new Error("Cannot put CLOSED on a channel.");if(this.closed||!e.is_active())return new f(!this.closed);for(;;){var n=this.takes.pop();{if(n===i.EMPTY){if(this.buf&&(t=r(t,e.procId),!this.buf.is_full()))return e.commit(),this.buf.add(t),new f(!0);if(this.dirty_puts>s?(this.puts.cleanup(function(t){return t.handler.is_active()}),this.dirty_puts=0):this.dirty_puts++,this.puts.length>=u)throw new Error("No more than "+u+" pending puts are allowed on a single channel.");o.addAction({type:"putting (blocking)",loc:e.loc,procId:e.procId}),this.puts.unbounded_unshift(new p(e,t));break}if(n.is_active()){var h=n.commit();e.commit(),a.run(function(){h(t)});var l=Date.now();return o.addAction({type:"putting",putId:e.procId,putLoc:e.loc,putTime:l,takeId:n.procId,takeLoc:n.loc,takeTime:l,isAlt:n.isAlt,value:""+t,blockedTime:Date.now()-n.started}),new f(!0)}}}return null},h.prototype._take=function(t){if(!t.is_active())return null;var e,n,r;if(this.buf&&this.buf.count()>0){t.commit();for(var p=this.buf.remove();;){e=this.puts.pop();{if(e===i.EMPTY)break;if(n=e.handler,n.is_active()){r=n.commit(),a.run(function(){r(!0)});var h=e.value.time;e.value.time=Date.now(),e.value.blockedTime=e.value.time-h,this.buf.add(e.value);break}}}return o.addAction({type:"taking",loc:t.loc,takeId:t.procId,takeTime:Date.now(),putId:p.procId,putTime:p.time,value:p.value,blockedTime:p.blockedTime||0}),new f(p.value)}for(;;){e=this.puts.pop();{if(e===i.EMPTY){if(this.closed)return t.commit(),new f(c);if(this.dirty_takes>s?(this.takes.cleanup(function(t){return t.is_active()}),this.dirty_takes=0):this.dirty_takes++,this.takes.length>=u)throw new Error("No more than "+u+" pending takes are allowed on a single channel.");o.addAction({type:"taking (blocking)",loc:t.loc,procId:t.procId}),this.takes.unbounded_unshift(t);break}if(n=e.handler,n.is_active()){t.commit(),r=n.commit(),a.run(function(){r(!0)});var p=e.value,l=Date.now();return o.addAction({type:"taking",takeId:t.procId,takeLoc:t.loc,takeTime:l,putId:n.procId,putLoc:n.loc,putTime:l,isAlt:n.isAlt,blockedTime:Date.now()-n.started,value:""+p}),new f(p)}}}return null},h.prototype.close=function(){if(!this.closed){for(this.closed=!0;;){var t=this.takes.pop();if(t===i.EMPTY)break;if(t.is_active()){o.addAction({type:this.sleeper?"slept":"closing",procId:t.procId,loc:t.loc,blockedTime:Date.now()-t.started,isAlt:t.isAlt});var e=t.commit();a.run(function(){e(c)})}}for(;;){var n=this.puts.pop();if(n===i.EMPTY)break;if(n.handler.is_active()){o.addAction({type:this.sleeper?"slept":"closing",procId:n.handler.procId,loc:n.handler.loc,blockedTime:Date.now()-n.started,isAlt:n.isAlt});var r=n.handler.commit();a.run(function(){r(!1)})}}}},h.prototype.is_closed=function(){return this.closed},e.chan=function(t){return new h(i.ring(32),i.ring(32),t)},e.Box=f,e.Channel=h,e.CLOSED=c},function(t,e,n){"use strict";function r(){u=!0,c=!1;for(var t=0;;){var e=s.pop();if(e===a.EMPTY)break;if(e(),t>=o)break;t++}u=!1,s.length>0&&i()}var i,a=n(4),o=1024,s=a.ring(32),u=!1,c=!1;if("undefined"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=function(){r()},i=function(){c&&u||(c=!0,f.port2.postMessage(0))}}else if("undefined"!=typeof setImmediate)i=function(){c&&u||(c=!0,setImmediate(r))};else{var p=0;"function"==typeof importScripts&&(p=1),i=function(){c&&u||(c=!0,setTimeout(r,p))}}e.run=function(t){s.unbounded_unshift(t),i()},e.queue_delay=function(t,e){setTimeout(t,e)}},function(t,e,n){var r=n(2),i={actions:[],processes:{},recording:!1,runningProcesses:[],_onFinished:null,startRecording:function(){this.actions=[],this.processes={},this.runningProcesses=[],this.recording=!0},stopRecording:function(){return this.recording=!1,{actions:this.actions,processes:this.processes}},getData:function(){return{actions:this.actions,processes:this.processes}},onFinished:function(t){this._onFinished=t},addAction:function(t){if(t.time=Date.now(),this.actions.push(t),"stopping"===t.type){var e=this.runningProcesses.indexOf(t.id);this.runningProcesses.splice(e,1),!this.runningProcesses.length&&this._onFinished&&r.run(function(){this._onFinished(this.stopRecording()),this._onFinished=null}.bind(this))}},addProcessInfo:function(t,e,n){this.processes[t]={id:t,name:e,source:n},this.runningProcesses.push(t)},getProcessName:function(t){var e=new Error;if(!e.stack)return null;var n=e.stack.split("\n");"Error"===n[0]&&n.shift();var r=n[t||2];r=r.replace(/^\s+at /,"");var i=r.match(/^([\w$]+)/);if(!i)return null;var a=i[1];return 0===a.indexOf("callee")||"anonymous"===a?null:(a=a.split("."),a[a.length-1])}};t.exports=i},function(t,e){"use strict";function n(t,e,n,r,i){for(var a=0;;){if(a>=i)break;n[r+a]=t[e+a],a++}}var r={toString:function(){return"[object EMPTY]"}},i=function(t,e,n,r){this.length=n,this.array=r,this.head=t,this.tail=e};i.prototype._unshift=function(t){var e=this.array,n=this.head;e[n]=t,this.head=(n+1)%e.length,this.length++},i.prototype._resize=function(){var t=this.array,e=2*t.length,r=new Array(e),i=this.head,a=this.tail,o=this.length;i>a?(n(t,a,r,0,o),this.tail=0,this.head=o,this.array=r):a>i?(n(t,a,r,0,t.length-a),n(t,0,r,t.length-a,i),this.tail=0,this.head=o,this.array=r):a===i&&(this.tail=0,this.head=0,this.array=r)},i.prototype.unbounded_unshift=function(t){this.length+1===this.array.length&&this._resize(),this._unshift(t)},i.prototype.pop=function(){if(0===this.length)return r;var t=this.array,e=this.tail,n=t[e];return t[e]=null,this.tail=(e+1)%t.length,this.length--,n},i.prototype.cleanup=function(t){for(var e=this.length,n=0;e>n;n++){var r=this.pop();t(r)&&this._unshift(r)}};var a=function(t,e){this.buf=t,this.n=e};a.prototype.is_full=function(){return this.buf.length==this.n},a.prototype.remove=function(){return this.buf.pop()},a.prototype.add=function(t){if(this.is_full())throw new Error("Can't add to a full buffer");this.buf._unshift(t)},a.prototype.count=function(){return this.buf.length};var o=function(t,e){this.buf=t,this.n=e};o.prototype.is_full=function(){return!1},o.prototype.remove=function(){return this.buf.pop()},o.prototype.add=function(t){this.buf.length<this.n&&this.buf._unshift(t)},o.prototype.count=function(){return this.buf.length};var s=function(t,e){this.buf=t,this.n=e};s.prototype.is_full=function(){return!1},s.prototype.remove=function(){return this.buf.pop()},s.prototype.add=function(t){this.buf.length===this.n&&this.buf.pop(),this.buf._unshift(t)},s.prototype.count=function(){return this.buf.length};var u=e.ring=function(t){return new i(0,0,0,new Array(t))};e.fixed=function(t){return new a(u(t),t)},e.dropping=function(t){return new o(u(t),t)},e.sliding=function(t){return new s(u(t),t)},e.EMPTY=r},function(t,e,n){"use strict";function r(t,e){var n=u.chan(s.fixed(1)),r=new f.Process(t,function(t){t===u.CLOSED?n.close():f.put_then_callback(n,t,function(){n.close()})});return h.addProcessInfo(r.id,e),r.run(),n}function i(t){return r(t,h.getProcessName())}function a(t){return r(t(),h.getProcessName())}function o(t){var e;return 0===t&&(t=null),e="number"==typeof t?s.fixed(t):t,u.chan(e)}var s=n(4),u=n(1),c=n(6),f=n(8),p=n(9),h=n(3);t.exports={buffers:{fixed:s.fixed,dropping:s.dropping,sliding:s.sliding},spawn:i,go:a,chan:o,DEFAULT:c.DEFAULT,CLOSED:u.CLOSED,put:f.put,take:f.take,takem:f.takem,alts:f.alts,putAsync:f.put_then_callback,takeAsync:f.take_then_callback,timeout:p.timeout}},function(t,e,n){"use strict";function r(t){return Math.floor(Math.random()*(t+1))}function i(t){var e,n=new Array(t);for(e=0;t>e;e++)n[e]=0;for(e=1;t>e;e++){var i=r(e);n[e]=n[i],n[i]=e}return n}var a=n(1).Box,o=function(t,e,n){this.f=e,this.flag=t,this.procId=n,this.started=Date.now(),this.isAlt=!0};o.prototype.is_active=function(){return this.flag.value},o.prototype.commit=function(){return this.flag.value=!1,this.f};var s=function(t,e){this.value=t,this.channel=e},u=Object.prototype.hasOwnProperty,c={toString:function(){return"[object DEFAULT]"}};e.do_alts=function(t,e,n,r){var f=t.length;if(0===f)throw new Error("Empty alt list");var p=n&&n.priority?!0:!1;if(!p)var h=i(f);for(var l=new a(!0),d=0;f>d;d++){var v,b,k=t[p?d:h[d]];if(k instanceof Array){var m=k[1];v=k[0],b=v._put(m,function(t){return new o(l,function(n){e(new s(n,t))},r)}(v))}else v=k,b=v._take(function(t){return new o(l,function(n){e(new s(n,t))},r)}(v));if(b instanceof a){e(new s(b.value,v));break}}b instanceof a||!n||!u.call(n,"default")||l.value&&(l.value=!1,e(new s(n["default"],c)))},e.DEFAULT=c,e.AltHandler=o},function(t,e,n){"use strict";function r(){}function i(t,e){return{is_closed:function(){return e.is_closed()},close:function(){e.close()},_put:function(t,n){return e._put(t,n)},_take:function(n){var r=e._take({is_active:function(){return n.is_active()},commit:function(){var e=n.commit();return function(n){return e(n===j?j:t(n))}}});if(r){var i=r.value;return new D(i===j?j:t(i))}return null}}}function a(t,e){return{is_closed:function(){return e.is_closed()},close:function(){e.close()},_put:function(n,r){return e._put(t(n),r)},_take:function(t){return e._take(t)}}}function o(t,e,n){var r=N(n);return O(wrapGenerator.mark(function i(){var n;return wrapGenerator(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=3,F(e);case 3:if(n=i.sent,n!==j){i.next=7;break}return r.close(),i.abrupt("break",12);case 7:if(!t(n)){i.next=10;break}return i.next=10,L(r,n);case 10:i.next=0;break;case 12:case"end":return i.stop()}},i,this)})),r}function s(t,e){return{is_closed:function(){return e.is_closed()},close:function(){e.close()},_put:function(n,r){return t(n)?e._put(n,r):new D(!e.is_closed())},_take:function(t){return e._take(t)}}}function u(t,e){return o(function(e){return!t(e)},e)}function c(t,e){return s(function(e){return!t(e)},e)}function f(t,e,n){var r=N(n);return O(P,[t,e,r]),r}function p(t,e,n){var r=N(n);return O(P,[t,r,e]),r}function h(t,e,n){return O(wrapGenerator.mark(function r(){var i;return wrapGenerator(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,F(t);case 3:if(i=r.sent,i!==j){r.next=7;break}return n||e.close(),r.abrupt("break",13);case 7:return r.next=9,L(e,i);case 9:if(r.sent){r.next=11;break}return r.abrupt("break",13);case 11:r.next=0;break;case 13:case"end":return r.stop()}},r,this)})),e}function l(t,e,n,r){var i=N(n),a=N(r);return O(wrapGenerator.mark(function o(){var n;return wrapGenerator(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,F(e);case 3:if(n=r.sent,n!==j){r.next=8;break}return i.close(),a.close(),r.abrupt("break",12);case 8:return r.next=10,L(t(n)?i:a,n);case 10:r.next=0;break;case 12:case"end":return r.stop()}},o,this)})),[i,a]}function d(t,e,n){return O(wrapGenerator.mark(function r(){var i,a;return wrapGenerator(function(r){for(;;)switch(r.prev=r.next){case 0:i=e;case 1:return r.next=4,F(n);case 4:if(a=r.sent,a!==j){r.next=9;break}return r.abrupt("return",i);case 9:i=t(i,a);case 10:r.next=1;break;case 12:case"end":return r.stop()}},r,this)}),[],!0)}function v(t,e,n){return O(wrapGenerator.mark(function r(){var i,a;return wrapGenerator(function(r){for(;;)switch(r.prev=r.next){case 0:i=e.length,a=0;case 2:if(!(i>a)){r.next=8;break}return r.next=5,L(t,e[a]);case 5:a++,r.next=2;break;case 8:n||t.close();case 9:case"end":return r.stop()}},r,this)}))}function b(t){var e=N(t.length);return v(e,t),e}function k(t,e,n){for(var i,a=N(n),o=e.length,s=new Array(o),u=N(1),c=new Array(o),f=0;o>f;f++)c[f]=function(t){return function(e){s[t]=e,i--,0===i&&U(u,s.slice(0),r)}}(f);return O(wrapGenerator.mark(function p(){var n,r;return wrapGenerator(function(s){for(;;)switch(s.prev=s.next){case 0:for(i=o,n=0;o>n;n++)try{C(e[n],c[n])}catch(f){i--}return s.next=5,F(u);case 5:r=s.sent,n=0;case 7:if(!(o>n)){s.next=14;break}if(r[n]!==j){s.next=11;break}return a.close(),s.abrupt("return");case 11:n++,s.next=7;break;case 14:return s.next=16,L(a,t.apply(null,r));case 16:s.next=0;break;case 18:case"end":return s.stop()}},p,this)})),a}function m(t,e){var n=N(e),r=t.slice(0);return O(wrapGenerator.mark(function i(){var t,e,a;return wrapGenerator(function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==r.length){i.next=3;break}return i.abrupt("break",15);case 3:return i.next=5,Y(r);case 5:if(t=i.sent,e=t.value,e!==j){i.next=11;break}return a=r.indexOf(t.channel),r.splice(a,1),i.abrupt("continue",0);case 11:return i.next=13,L(n,e);case 13:i.next=0;break;case 15:n.close();case 16:case"end":return i.stop()}},i,this)})),n}function x(t,e){var n=t.slice(0);return d(function(t,e){return t.push(e),t},n,e)}function w(t,e,n){var r=N(n);return O(wrapGenerator.mark(function i(){var n,a;return wrapGenerator(function(i){for(;;)switch(i.prev=i.next){case 0:n=0;case 1:if(!(t>n)){i.next=12;break}return i.next=4,F(e);case 4:if(a=i.sent,a!==j){i.next=7;break}return i.abrupt("break",12);case 7:return i.next=9,L(r,a);case 9:n++,i.next=1;break;case 12:r.close();case 13:case"end":return i.stop()}},i,this)})),r}function g(t,e){var n=N(e),r=B;return O(wrapGenerator.mark(function i(){var e;return wrapGenerator(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=3,F(t);case 3:if(e=i.sent,e!==j){i.next=6;break}return i.abrupt("break",13);case 6:if(e!==r){i.next=8;break}return i.abrupt("continue",0);case 8:return r=e,i.next=11,L(n,e);case 11:i.next=0;break;case 13:n.close();case 14:case"end":return i.stop()}},i,this)})),n}function _(t,e,n){var r=N(n),i=[],a=B;return O(wrapGenerator.mark(function o(){var n,s;return wrapGenerator(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,F(e);case 3:if(n=o.sent,n!==j){o.next=12;break}if(!(i.length>0)){o.next=8;break}return o.next=8,L(r,i);case 8:return r.close(),o.abrupt("break",23);case 12:if(s=t(n),s!==a&&a!==B){o.next=17;break}i.push(n),o.next=20;break;case 17:return o.next=19,L(r,i);case 19:i=[n];case 20:a=s;case 21:o.next=0;break;case 23:case"end":return o.stop()}},o,this)})),r}function y(t,e,n){var r=N(n);return O(wrapGenerator.mark(function i(){var n,a,o;return wrapGenerator(function(i){for(;;)switch(i.prev=i.next){case 0:n=new Array(t),a=0;case 3:if(!(t>a)){i.next=17;break}return i.next=6,F(e);case 6:if(o=i.sent,o!==j){i.next=13;break}if(!(a>0)){i.next=11;break}return i.next=11,L(r,n.slice(0,a));case 11:return r.close(),i.abrupt("return");case 13:n[a]=o;case 14:a++,i.next=3;break;case 17:return i.next=19,L(r,n);case 19:i.next=0;break;case 21:case"end":return i.stop()}},i,this)})),r}function A(t){var e=0;for(var n in t)e++;return e}function E(t){var e=t[R];return void 0===e&&(e=t[R]=q()),e}function T(t){function e(t){return function(e){n--,0===n&&U(a,!0,r),e||i.untap(t.channel)}}var n,i=new z(t),a=N(1);return O(wrapGenerator.mark(function o(){var r,s,u,c,f;return wrapGenerator(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,F(t);case 3:if(r=o.sent,c=i.taps,r!==j){o.next=9;break}for(s in c)u=c[s],u.keepOpen||u.channel.close();return i.untapAll(),o.abrupt("break",17);case 9:n=A(c),f=n;for(s in c)u=c[s],U(u.channel,r,e(u));if(!(f>0)){o.next=15;break}return o.next=15,F(a);case 15:o.next=0;break;case 17:case"end":return o.stop()}},o,this)})),i}function M(t){var e=new $(t);return O(wrapGenerator.mark(function n(){var r,i,a,o,s,u;return wrapGenerator(function(n){for(;;)switch(n.prev=n.next){case 0:r=e._getAllState();case 1:return n.next=4,Y(r.reads);case 4:if(i=n.sent,a=i.value,o=i.channel,a!==j){n.next=11;break}return delete e.stateMap[E(o)],r=e._getAllState(),n.abrupt("continue",1);case 11:if(o!==e.change){n.next=14;break}return r=e._getAllState(),n.abrupt("continue",1);case 14:if(s=r.solos,!(s.indexOf(o)>-1||s.length&&!(e.mutes.indexOf(o)>-1))){n.next=21;break}return n.next=18,L(t,a);case 18:if(u=n.sent){n.next=21;break}return n.abrupt("break",23);case 21:n.next=1;break;case 23:case"end":return n.stop()}},n,this)})),e}function I(){return null}function G(t,e,n){n=n||I;var r=new K(t,e,n);return O(wrapGenerator.mark(function i(){var n,a,o,s,u;return wrapGenerator(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=3,F(t);case 3:if(n=i.sent,a=r.mults,n!==j){i.next=8;break}for(o in a)a[o].muxch().close();return i.abrupt("break",17);case 8:if(o=e(n),s=a[o],!s){i.next=15;break}return i.next=13,L(s.muxch(),n);case 13:u=i.sent,u||delete a[o];case 15:i.next=0;break;case 17:case"end":return i.stop()}},i,this)})),r}var P=wrapGenerator.mark(function Q(t,e,n){var r,i,a,o;return wrapGenerator(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,F(e);case 3:if(r=s.sent,r!==j){s.next=9;break}return n.close(),s.abrupt("break",22);case 9:i=t(r),a=i.length,o=0;case 12:if(!(a>o)){s.next=18;break}return s.next=15,L(n,i[o]);case 15:o++,s.next=12;break;case 18:if(!n.is_closed()){s.next=20;break}return s.abrupt("break",22);case 20:s.next=0;break;case 22:case"end":return s.stop()}},Q,this)}),D=n(1).Box,S=n(5),O=S.go,F=S.take,L=S.put,C=S.takeAsync,U=S.putAsync,Y=S.alts,N=S.chan,j=S.CLOSED,B={},q=function(){var t=0;return function(){return t++,""+t}}(),R="__csp_channel_id",z=function(t){this.taps={},this.ch=t},H=function(t,e){this.channel=t,this.keepOpen=e};z.prototype.muxch=function(){return this.ch},z.prototype.tap=function(t,e){var n=E(t);this.taps[n]=new H(t,e)},z.prototype.untap=function(t){delete this.taps[E(t)]},z.prototype.untapAll=function(){this.taps={}},T.tap=function(t,e,n){return t.tap(e,n),e},T.untap=function(t,e){t.untap(e)},T.untapAll=function(t){t.untapAll()};var $=function(t){this.ch=t,this.stateMap={},this.change=N(),this.soloMode=M.MUTE};$.prototype._changed=function(){U(this.change,!0,r)},$.prototype._getAllState=function(){var t,e=this.stateMap,n=[],r=[],i=[];for(var a in e){var o=e[a],s=o.state,u=o.channel;s[M.SOLO]&&n.push(u),s[M.MUTE]&&r.push(u),s[M.PAUSE]&&i.push(u)}var c,f;if(this.soloMode===M.PAUSE&&n.length>0){for(f=n.length,t=new Array(f+1),c=0;f>c;c++)t[c]=n[c];t[f]=this.change}else{t=[];for(a in e)o=e[a],u=o.channel,i.indexOf(u)<0&&t.push(u);t.push(this.change)}return{solos:n,mutes:r,reads:t}},$.prototype.admix=function(t){this.stateMap[E(t)]={channel:t,state:{}},this._changed()},$.prototype.unmix=function(t){delete this.stateMap[E(t)],this._changed()},$.prototype.unmixAll=function(){this.stateMap={},this._changed()},$.prototype.toggle=function(t){for(var e=t.length,n=0;e>n;n++){var r=t[n][0],i=E(r),a=t[n][1],o=this.stateMap[i];o||(o=this.stateMap[i]={channel:r,state:{}});for(var s in a)o.state[s]=a[s]}this._changed()},$.prototype.setSoloMode=function(t){if(J.indexOf(t)<0)throw new Error("Mode must be one of: ",J.join(", "));this.soloMode=t,this._changed()},M.MUTE="mute",M.PAUSE="pause",M.SOLO="solo";var J=[M.MUTE,M.PAUSE];M.add=function(t,e){t.admix(e)},M.remove=function(t,e){t.unmix(e)},M.removeAll=function(t){t.unmixAll()},M.toggle=function(t,e){t.toggle(e)},M.setSoloMode=function(t,e){t.setSoloMode(e)};var K=function(t,e,n){this.ch=t,this.topicFn=e,this.bufferFn=n,this.mults={}};K.prototype._ensureMult=function(t){var e=this.mults[t],n=this.bufferFn;return e||(e=this.mults[t]=T(N(n(t)))),e},K.prototype.sub=function(t,e,n){var r=this._ensureMult(t);return T.tap(r,e,n)},K.prototype.unsub=function(t,e){var n=this.mults[t];n&&T.untap(n,e)},K.prototype.unsubAll=function(t){void 0===t?this.mults={}:delete this.mults[t]},G.sub=function(t,e,n,r){return t.sub(e,n,r)},G.unsub=function(t,e,n){t.unsub(e,n)},G.unsubAll=function(t,e){t.unsubAll(e)},t.exports={mapFrom:i,mapInto:a,filterFrom:o,filterInto:s,removeFrom:u,removeInto:c,mapcatFrom:f,mapcatInto:p,pipe:h,split:l,reduce:d,onto:v,fromColl:b,map:k,merge:m,into:x,take:w,unique:g,partition:y,partitionBy:_,mult:T,mix:M,pub:G}},function(t,e,n){"use strict";function r(t,e,n,r){n=n||d;var i=t._put(e,new l(n,"put",r));i&&n(i.value)}function i(t,e,n){e=e||d;var r=t._take(new l(e,"take",n));r&&e&&e(r.value)}function a(t){return new b(k,t)}function o(t){return new b(m,t)}function s(t,e){return new b(x,{channel:t,value:e})}function u(t,e){return new b(w,{operations:t,options:e})}var c=n(2),f=n(6),p=n(3),h=1,l=function(t,e,n){this.f=t,this.type=e,this.procId=n,this.started=Date.now()};l.prototype.is_active=function(){return!0},l.prototype.commit=function(){return this.f};var d=function(){},v=function(t,e){this.gen=t,this.finished=!1,this.onFinish=e,this.startedTime=Date.now(),this.id=h++},b=function(t,e){this.op=t,this.data=e},k="take",m="takem",x="put",w="alts";v.prototype._continue=function(t,e){var n=this;c.run(function(){n.run(t,e)})},v.prototype._done=function(t){if(!this.finished){p.addAction({type:"stopping",runningTime:Date.now()-this.startedTime,procId:this.id}),this.finished=!0;var e=this.onFinish;"function"==typeof e&&c.run(function(){e(t)})}},v.prototype.run=function(t,e){if(!this.finished){var n=e&&t instanceof Error?"throw":"next",a=this.gen[n](t);if(a.done)return void this._done(a.value);var o=a.value,s=this;if(o instanceof b)switch(o.op){case x:var u=o.data;r(u.channel,u.value,function(t){s._continue(t)},this.id);break;case k:var c=o.data;i(c,function(t){s._continue(t)},this.id);break;case m:var c=o.data;i(c,function(t){s._continue(t,!0)},this.id);break;case w:f.do_alts(o.data.operations,function(t){s._continue(t)},o.data.options,this.id)}else this._continue(o)}},e.put_then_callback=r,e.take_then_callback=i,e.put=s,e.take=a,e.takem=o,e.alts=u,e.Process=v},function(t,e,n){"use strict";var r=n(2),i=n(1);e.timeout=function(t){var e=i.chan();return e.sleeper=!0,r.queue_delay(function(){e.close()},t),e}}]);